<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="admin">
    <!--관리자 가입-->
    <insert id="createAdmin">
        INSERT INTO
            tb_admin (EMAIL, PASSWORD, ADMIN_NAME, CREATE_DATE, MODIFIED_DATE)
        VALUES
            (#{email}, #{password}, #{adminName}, now(), now())
    </insert>

    <!--관리자 이메일 주소 중복확인-->
    <select id="findOneByEmail" resultType="int">
        SELECT COUNT(*)
        FROM tb_admin
        WHERE EMAIL = #{email}
    </select>

    <!--관리자 이름 중복확인-->
    <select id="findOneByName" resultType="int">
        SELECT COUNT(*)
        FROM tb_admin
        WHERE ADMIN_NAME = #{adminName}
    </select>

    <!--관리자 리스트-->
    <select id="list" resultMap="adminResultMap">
        SELECT
            ID,
            EMAIL,
            ADMIN_NAME,
            CREATE_DATE,
            MODIFIED_DATE
        FROM tb_admin
    </select>

    <!--관리자 로그인-->
    <select id="login" resultMap="adminResultMap">
        SELECT
            ID,
            EMAIL,
            ADMIN_NAME,
            PASSWORD,
            CREATE_DATE,
            MODIFIED_DATE
        FROM tb_admin
        WHERE EMAIL = #{email}
    </select>

    <resultMap id="adminResultMap" type="Admin">
        <id column="id" property="id"/>
        <result column="EMAIL" property="email"/>
        <result column="PASSWORD" property="password"/>
        <result column="ADMIN_NAME" property="adminName"/>
        <result column="CREATE_DATE" property="createDate"/>
        <result column="MODIFIED_DATE" property="modifiedDate"/>
    </resultMap>
</mapper>
