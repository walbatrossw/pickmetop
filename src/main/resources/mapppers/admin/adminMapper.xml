<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="admin">
    <!--관리자 가입-->
    <insert id="createAdmin">
        INSERT INTO
        tb_admin ( EMAIL, PASSWORD, NAME, CREATE_DATE, MODIFIED_DATE )
        VALUES
        ( #{email}, #{password}, #{name}, now(), now() )
    </insert>

    <!--관리자 이메일 주소 중복확인-->
    <select id="findOneByEmail" resultType="int">
        SELECT
          COUNT(*)
        FROM tb_admin
        WHERE EMAIL = #{email}
    </select>

    <!--관리자 이름 중복확인-->
    <select id="findOneByName" resultType="int">
        SELECT
          COUNT(*)
        FROM tb_admin
        WHERE NAME = #{name}
    </select>

    <!--관리자 리스트-->
    <select id="list" resultType="com.cafe24.pickmetop.admin.domain.Admin">
        SELECT
        ID AS id
        , EMAIL AS email
        , NAME AS name
        , CREATE_DATE AS createDate
        , MODIFIED_DATE AS modifiedDate
        FROM tb_admin
    </select>

    <!--관리자 로그인-->
    <select id="login" resultType="com.cafe24.pickmetop.admin.domain.Admin">
        SELECT
        ID
        , EMAIL
        , NAME
        , PASSWORD
        , CREATE_DATE
        , MODIFIED_DATE
        FROM tb_admin
        WHERE EMAIL = #{email}
    </select>
</mapper>
